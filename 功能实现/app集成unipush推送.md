# app集成unipush推送

> 业务场景：推送手机通知栏消息，app在线或者关闭app均能收到消息。
>
> 因为unipush2.0集成了之前个推的vip版本送达率更高，也不需要为了解决app被杀死收不到消息而集成各大厂商的sdk，使得开发变得更加便捷！
>
> 文档https://uniapp.dcloud.io/unipush-v2.html



## 推送流程

1. HbuilderX中在manfest.json配置文件中勾选unipush2.0后即可在App.vue中获取手机端cid，cid作为唯一标识可以在业务处理中与用户名绑定，以后可以通过用户名推送消息。

2. HBuilderX中创建云函数，云函数就是接口，后台可以通过URL直接请求到这个云函数，云函数接收到参数可以做逻辑处理比如发生消息，手机端就能直接收到通知。

   1. 首先右键根目录创建云开发环境

      ![image-20220728091433447](D:\idea-work\test\BECE1000\study-diary\功能实现\image-20220728091433447.png)

   2. 选择某一个云空间，右键创建目录，一个目录就是一个云函数

      ![image-20220728091727458](D:\idea-work\test\BECE1000\study-diary\功能实现\image-20220728091727458.png)

   3. 


## 离线推送注意点

### 华为

- 生成证书https://ask.dcloud.net.cn/article/35777
- 查看自有证书，到文件所在目录执行命令``` keytool -list -v -keystore alias1850.keystore```输入证书密码，得到里边的SHA256 填入配置
- 把信息填入厂商通道配置中保存
- 必须重新云打包（**配置不会马上生效，两小时左右**）
- 手机原先的app清空数据并卸载重新安装新打包的文件

### OPPO和VIVO

把对应的信息填入厂商通道配置，保存。（不会马上生效），需要上架app到对应的应用商店才行！

可能还要加入我已阅读同意的提示栏，就是那种注意事项的页面。不同意进不了app。