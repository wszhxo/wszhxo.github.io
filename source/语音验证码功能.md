# 视障人士语音验证码实现

> 我只想在验证码右边显示一个语音播放验证码功能
>
> 百度查到的全是通过手机打电话，接听验证码，或者短信验证码，只能自己探索

**需要的jar包**

cmu_us_kal.jar
cmulex.jar
en_us.jar
freetts.jar
freetts-jsapi10.jar

原理是验证码图片生成的时候也会有一个code用于输入时判断验证码是否正确，比如图片上的验证码是1234，传入生成语音验证码的路径和这个code就行，最后生成一个wav文件

```java
package xxxxxxxx

import com.sun.speech.freetts.FreeTTS;
import com.sun.speech.freetts.Voice;
import com.sun.speech.freetts.VoiceManager;
import com.sun.speech.freetts.audio.AudioPlayer;
import com.sun.speech.freetts.audio.SingleFileAudioPlayer;

import javax.sound.sampled.AudioFileFormat.Type;

/**
 * Simple program to demonstrate the use of the FreeTTS speech
 * synthesizer.  This simple program shows how to use FreeTTS
 * without requiring the Java Speech API (JSAPI).
 */
public class TTS {

    /**
     * Example of how to list all the known voices.
     */


    public static void main(String[] args) {

        // listAllVoices();
        Boolean test  = createTTS("D://output","1 2 3");
        System.out.println(test);

    }

    public static boolean createTTS(String de, String speak ){
        FreeTTS freetts;
        AudioPlayer audioPlayer = null;
        String voiceName = "kevin16";

        /* The VoiceManager manages all the voices for FreeTTS.
         */
        VoiceManager voiceManager = VoiceManager.getInstance();
        Voice helloVoice = voiceManager.getVoice(voiceName);
        System.out.println(voiceManager);
        if (helloVoice == null) {
            return false;
        }

        /* Allocates the resources for the voice.
         */
        try{
            helloVoice.allocate();

            /* Synthesize speech.
             */
            //create a audioplayer to dump the output file
            audioPlayer = new SingleFileAudioPlayer(de,Type.WAVE);
            //attach the audioplayer
            helloVoice.setAudioPlayer(audioPlayer);

            helloVoice.speak(speak);

            /* Clean up and leave.
             */
            helloVoice.deallocate();
            //don't forget to close the audioplayer otherwise file will not be saved
            audioPlayer.close();
            return true;
        }catch( Exception e ){
            return false;
        }

        //System.exit(0);

    }
}
```



