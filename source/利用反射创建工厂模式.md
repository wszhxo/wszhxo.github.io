# 利用反射创建工厂模式

简单工程模式有个缺点就是拓展性很差

这时就可以利用反射和泛型

```java
package fanshe;
import java.lang.reflect.InvocationTargetException;
public class 反射与工厂模式 {
	public static void main(String[] args) {
		Imessage imessage=Factory.getInstance("fanshe.ImessageImpl", Imessage.class);
		imessage.send(); 
		Hservice hservice=Factory.getInstance("fanshe.HserviceImpl", Hservice.class);
		hservice.service(); 
	}
}
class Factory{
	Factory(){}
	@SuppressWarnings("unchecked")
	public  static <T> T getInstance(String className,Class<T> cls){
		T instance =null;
		try {
			//首先获取class 对象,再获取构造方法,最后构造方法实例化
			instance=(T) Class.forName(className).getDeclaredConstructor().newInstance();
		} catch (Exception e) {
			e.printStackTrace();
		}
		return instance;
	}
}
interface Imessage{
	public void send();
}
class ImessageImpl implements Imessage{
	@Override
	public void send() {
		System.out.println("ImessageImpl发送");
	}
}
interface Hservice{
	public void service();
}
class HserviceImpl implements Hservice{
	@Override
	public void service() {
		System.out.println("HserviceImpl服务");
	}
}

//控制台输出

ImessageImpl发送
HserviceImpl服务

```

