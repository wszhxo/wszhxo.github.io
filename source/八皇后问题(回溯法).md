---
title: 八皇后问题(回溯法)
categories:
  - java基础
tags:
  - 数据结构
  - 八皇后
  - 回溯法
abbrlink: 13911829
---



## 八皇后游戏规则

**在8x8棋盘里有8个皇后 ,每一个皇后之间都不能在同一行,同一列,同一45度斜线**

## 什么是回溯法

**我的理解就是暴力探索,每个点都去尝试一下,不行那就回头,直到达到目标**

<!--more-->

## 思路

**至少能知道每行,每列 都会有一个皇后**

所以由第1行第1列放第一个皇后开始探索,第二个放在第2行的第1列,判断游戏规则是否成立?

- 成立则开始第三行的1-8列逐一试探,以此类推,找到8个为止,
- 不成立则回到上一步(回溯),换下一个点

每次加入的皇后都要与前面的所有加入的皇后比较

![1568208227205](八皇后问题(回溯法)/1568208227205.png)

## 打印成功排列



```java
private  void print() {
		for (int i = 0; i < array.length; i++) {
			System.out.print(array[i]+" ");
		}
		System.out.println();
	}
```

## 判断每次加入皇后是否合法

```java
//判断每个加入的皇后是否符合游戏规则,与之前所有的皇后比较
	private  boolean judge(int n) {
		count++;
		for (int i = 0; i < n; i++) {
			//判断是否处于同一列 ,是否处于统一45度斜线
			if (array[n]==array[i]||Math.abs(n-i)==Math.abs(array[n]-array[i])) {			
				return false;
			}
		}	
		return true;
	}
```

## 递归,回溯核心算法

```java
private  void check(int n) {
		//此时n=8,8个皇后都摆满了
		if (n==size) {
			print();
			return;
		}
		//总左往右,从下往上开始遍历
		for (int i = 0; i < size; i++) {
			//从第一行第一列开始
			array[n]=i;
			//从第二行第一列开始1到8格子都试探一边
			if (judge(n)) {
				//成功换到第三行,以此类推
				 check(n+1);
			}
		}
	}
```

## 测试结果总共92种解法

暴力运算了15720次

```java
0 4 7 5 2 6 1 3 
0 5 7 2 6 3 1 4 
0 6 3 5 7 1 4 2 
0 6 4 7 1 3 5 2 
1 3 5 7 2 0 6 4 
1 4 6 0 2 7 5 3 
1 4 6 3 0 7 5 2 
1 5 0 6 3 7 2 4 
1 5 7 2 0 3 6 4 
以下还有很多....
```





