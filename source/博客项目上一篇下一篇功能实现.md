---
title: 上一篇下一篇功能的实现
categories:
  - 功能
abbrlink: 305461115
---


本来我想的是blog表中顺便记录上一篇下一篇文章的id，可嫌麻烦，或者id+1，-1？等会删除一篇文章时就不管用了

我找到了很简单的方法

<!--more-->

## sql语句

```sql
下一篇： select id,title  from blog where  id> 1  limit 1;
上一篇： select 所需字段  from 表 where  id< 当前id  order by  id desc  limit 1;
```

## mybatis代码

```xml
 <!--查询上一篇文章-->
    <select id="findBeforeBlog" resultType="Blog" parameterType="Integer">
       select id,title  from blog where  id> #{id}  limit 1;
    </select>
    <!--查询下一篇文章-->
    <select id="findAfterBlog" resultType="Blog" parameterType="Integer">
        select id,title  from blog where id &lt; #{id} order by  id desc  limit 1;
    </select>
```

因为数据库里id自增,新加进来的一定大一些,新加的文章(新文章)就是上一篇,反之同理

Mybatis 的<会报错所以用了转义字符```&lt;```

## service层

没有上一篇下一篇的话就会报空指针

```java
@Override
    public Blog findBeforeBlog(Integer id) {
        Blog beforeBlog = blogMapper.findBeforeBlog(id);
        if (beforeBlog==null){
            beforeBlog=new Blog();
            beforeBlog.setTitle("没有上一篇了！");
        }
        return beforeBlog;
    }
```

下一篇同理

## Thymeleaf前端代码

为空那么id就是默认的0,就用javascript:void(0);意思是没有点击事件

```html
<p>上一篇：<a th:href="${beforeBlog.id==0}?'javascript:void(0);':@{|/blog/${beforeBlog.id}|}" th:text="${beforeBlog.title}"></a></p>
<p>下一篇：<a th:href="${afterBlog.id==0}?'javascript:void(0);':@{|/blog/${afterBlog.id}|}" th:text="${afterBlog.title}"></a></p>
```

