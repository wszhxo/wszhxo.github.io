---
title: 稀疏数组的简单案例
categories:
  - java基础
abbrlink: 3033192881
---


## 什么是稀疏数组 

[稀疏数组百度百科](https://baike.baidu.com/item/%E7%A8%80%E7%96%8F%E7%9F%A9%E9%98%B5/3249303?fr=aladdin) 简单来说就是矩阵(<i color="green">线性代数里的知识点</i>)中0

的个数远远多于非0的个数,且非0数字分布不规则,矩阵用代码形容就是数组了

其实也很好理解,如果非0个数远远多于0的个数,那么完全可以用二维数组表示更加方便,更易阅读.
<!--more-->

比如五子棋盘,如果棋子非常多,基本占满整个棋盘,那完全可以用二维数组表示

黑子白子用12表示,空位用0表示 ,每一个交叉点用一个数字表示

## 下边是11X11的棋盘,

可以看到只有三个棋子,那么就可以用稀疏数组表示了

<img src="稀疏数组的简单案例\五子棋.png" width="300" alt="五子棋" align=center>

先用二维数组表示

```java
		int[][] a=new int[11][11];
		a[1][2]=1;//1为黑子
		a[2][3]=2;//2位白子
		a[3][4]=2;//2位白子
```

循环输出即可

```java
0 0 0 0 0 0 0 0 0 0 0 
0 0 1 0 0 0 0 0 0 0 0 
0 0 0 2 0 0 0 0 0 0 0 
0 0 0 0 2 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 
```

转化为稀疏数组

第一行表示的是二维数组总共的几行几列,和总共几个值,从第二行开始记录值所在的行列下标

| -row                                                         | -col                                                         | value                                                        |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| <font color="green">总共</font>11<font color="green">行</font> | <font color="green">总共</font>11<font color="green">列</font> | <font color="green">总共</font>3<font color="green">个值</font> |
| 1                                                            | 2                                                            | 1                                                            |
| 2                                                            | 3                                                            | 2                                                            |
| 3                                                            | 4                                                            | 2                                                            |
|                                                              |                                                              |                                                              |

## 模拟五子棋存档过程



二维数组->稀疏数组->存储文件->读取文件->稀疏数组->二维数组

```java
package 算法;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;

public class 稀疏数组 {
	
	public static void main(String[] args) {
		
		//模仿五子棋8X8的棋盘
		//定义二维数组
		int[][] a=new int[11][11];
		a[1][2]=1;//1为黑子
		a[2][3]=2;//2位白子
		a[3][4]=2;//2位白子
		int count=0;
		for (int i = 0; i < a.length; i++) {
			for (int j = 0; j < a.length; j++) {
				if (a[i][j]!=0) {
					count++;
				}
				System.out.print(a[i][j]+" ");
			}
			System.out.println();
		}
		System.out.println("---------------------------------------");
		//修改为稀疏数组
		int[][] b=new int[count+1][3];
		//第一行定义的是稀疏数组的属性  行 列  值 
		int row=1;
			try {
				File file=new File("d:/a.txt");
				
				//稀疏数组输出到文件
				FileOutputStream foStream =new FileOutputStream(file);
				OutputStreamWriter osWriter=new OutputStreamWriter(foStream, "utf-8");
				BufferedWriter fwFileWriter=new BufferedWriter(osWriter);
				//BufferedReader,,,,BufferedWriter按行写入和读取
				
				String lString=null;
				int s1=b[0][0]=11;//几行
				int s2=b[0][1]=11;//几列
				int s3=b[0][2]=count;//有数据的点的个数
				lString=s1+","+s2+","+s3+",";
				fwFileWriter.write(lString,0,lString.length());
				fwFileWriter.newLine();
				for (int i = 0; i < a.length; i++) {
					for (int j = 0; j < a.length; j++) {
						if (a[i][j]!=0) {
							int str1=b[row][0]=i;//几列
							int str2=b[row][1]=j;//几列
							int str3=b[row][2]=a[i][j];//几列
							lString=str1+","+str2+","+str3+",";
							row++;
							fwFileWriter.write(lString,0,lString.length());
							fwFileWriter.newLine();
						}
					}
				}
				fwFileWriter.flush();////强刷字节到内容中
				
				
				
				FileInputStream fileInputStream=new FileInputStream(file);
				InputStreamReader isw=new InputStreamReader(fileInputStream,"utf-8");
				BufferedReader reader=new BufferedReader(isw);
				//读取文件转化为二维数组
				String strRead=null;
				int c=0;
				int[][] a2=null;
				while((strRead=reader.readLine())!=null) {
					if (!strRead.trim().equals("")) {
						 String[] split = strRead.split(",");
						 if (c!=0) {
							 a2[Integer.parseInt(split[0])][Integer.parseInt(split[1])]=Integer.parseInt(split[2]);
						 }else {
							 a2=new int[Integer.parseInt(split[0])][Integer.parseInt(split[1])];
							 c++;
						 }
					}
				}
				//测试输出看是否成功
				for (int i = 0; i < a2.length; i++) {
					for (int j = 0; j < a2.length; j++) {
						System.out.print(a2[i][j]+" ");
					}
					System.out.println();
				}
				
			} catch (IOException e) {
				e.printStackTrace();
			}finally {
				
			}	
	}
	/**
	*创建人:
	*项目名:	zhx
	*算法
	*2019年8月29日-下午7:13:28
	*/
}

```



